
## åœ¨å°ç¨‹åºæ¢ç´¢é“è·¯ä¸Šçš„æ–¹å‘è°ƒæ•´
> ä½œè€…ï¼šYufJ

### å¼€å§‹

æ—¶é—´å›åˆ°2020å¹´åˆï¼Œå½“æ—¶å…¬å¸å†…éƒ¨å·²ç»æœ‰äº†ç¬¬ä¸‰ç‰ˆhybridæ–¹æ¡ˆäº†ï¼Œç®€ç§°hybrid3ã€‚é‡‡ç”¨çš„ä¹Ÿæ˜¯åŒçº¿ç¨‹æ–¹æ¡ˆï¼Œåº”ç”¨ç¦»çº¿åŒ…æ‹†åˆ†ä¸ºJSCçš„é€»è¾‘å±‚ï¼Œwebviewçš„æ¸²æŸ“å±‚ã€‚ä»è¿™ä¸ªè§†è§’çœ‹æ¶æ„ä¸å°ç¨‹åºæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯hybrid3çš„é€»è¾‘å±‚å…¶å®åˆä¸å°ç¨‹åºä¸å¤ªä¸€æ ·ï¼Œé€»è¾‘å±‚åšçš„äº‹æƒ…æ¯”è¾ƒå¤šã€‚æŠŠæ•´ä¸ªReactåº”ç”¨çš„æ‰§è¡Œå…¨éƒ¨æ”¾åœ¨äº†é€»è¾‘å±‚ï¼Œå½¢è±¡çš„æ¯”å–»é‚£å°±æ˜¯ä¸€ä¸ªwebviewç‰ˆæ¸²æŸ“çš„ReactNativeğŸ˜“ã€‚

ç”±äºå…¬å¸åœ¨å°ç¨‹åºä¸Šçš„å¼€å‘æŠ•å…¥éƒ½å¾ˆå¤šï¼Œä¸šåŠ¡æ¯”è¾ƒä¾èµ–å°ç¨‹åºæŠ€æœ¯ï¼Œå…¬å¸å¼€å§‹åœ¨å†…éƒ¨IMä¸Šå°è¯•å°ç¨‹åºæ–¹æ¡ˆä¸ºåç»­è¿™äº›ä¸šåŠ¡åœ¨ä¸»æ¿Appæ¥å…¥åšå‡†å¤‡ã€‚æ—¢ç„¶ä½¿ç”¨å°ç¨‹åºå½“ç„¶æ•´ä¸ªå¼€å‘æ–¹å¼ç¼–ç æ–¹å¼éƒ½æ˜¯å’Œå°ç¨‹åºä¿æŒä¸€è‡´çš„ï¼Œä¸šåŠ¡å¼€å‘æ˜¯ä¹Ÿæ˜¯æ¨¡ç‰ˆã€æ ·å¼ã€é€»è¾‘ã€é…ç½®ç­‰ç­‰ï¼ŒåŸºæœ¬ç¡®å®šäº†å¯¹å¤–çš„æ¥å…¥æ–¹å¼äº†ã€‚ å°ç¨‹åºçš„åŸºç¡€åº“èƒ½åŠ›ä»¥åŠç¼–è¯‘æ„å»ºèƒ½åŠ›çš„å®ç°ï¼Œè€æ¿å½“æ—¶æ‹æ¿å¯ä»¥æ²¿ç”¨hybrid3çš„æ–¹æ¡ˆï¼Œå°†å°ç¨‹åºçš„DSLè½¬æ¢æˆReactä¸å°±å®Œç¾äº†å˜›ã€‚è‡³æ­¤å°ç¨‹åºæ•´ä½“åŸºè°ƒåŸºæœ¬å®šäº†ï¼Œåé¢å¯ä»¥å¼€å§‹ç€æ‰‹è¸©å…¶ä¸­çš„å‘äº†ã€‚

ä¸Šé¢æ ¸å¿ƒåŠŸèƒ½å…¶å®å°±æ˜¯å°ç¨‹åºDSLè½¬Reactç¼–è¯‘å’ŒåŸºç¡€åº“ã€‚å…ˆè¯´å°ç¨‹åºDSLè½¬Reactï¼Œç”±äºå¯¹å°ç¨‹åºä¸€ç›´ä¿æŒä¸€äº›å…³æ³¨æ‰€ä»¥ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å°±æ˜¯Taroï¼Œéšçº¦è®°å¾—Taroæœ‰ä¸ªconvertåŠŸèƒ½å®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚å°†å°ç¨‹åºè½¬æˆç±»Reactã€‚åŸºç¡€åº“å®ç°åŸºäºå·²ç»å°†å°ç¨‹åºè½¬ä¸ºReactï¼Œæ‰€ä»¥é€»è¾‘å±‚éœ€è¦å°†æ¯æ¬¡çš„æ›´æ–°çš„vdomä¿¡æ¯é€šçŸ¥åˆ°æ¸²æŸ“å±‚ï¼Œå¯ä»¥æ”¹é€ react-domæˆ–è€…ç¼–å†™è‡ªå®šä¹‰æ¸²æŸ“å™¨ã€‚

### é—®é¢˜

#### é™æ€è½¬è¯‘ä¸èƒ½è§£å†³çš„é—®é¢˜

è½¬è¯‘èƒ½åŠ›å®Œå…¨ä¸èƒ½holdä¸šåŠ¡æ–¹æ³•ç¼–å†™å°ç¨‹åºçš„å„ç§å§¿åŠ¿ï¼Œæ¯”å¦‚templateæ·±åº¦åµŒå¥—ã€templateä¼ å€¼ç­‰ç­‰é—®é¢˜ï¼Œæ²¡åŠæ³•åªèƒ½forkä¸‹æ¥é­”æ”¹äº†ã€‚

é€»è¾‘å±‚ä»£ç ç”Ÿæˆä¾èµ–å°ç¨‹åºDSLçš„jsæ–‡ä»¶ä¸­Pageã€Componentå‡½æ•°è°ƒç”¨è¯­æ³•ï¼Œä¸€æ—¦ä¸šåŠ¡æ–¹çš„å°ç¨‹åºä½¿ç”¨äº†ç±»ä¼¼wepyè¿™æ ·çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œæˆ–è€…è‡ªå·±å°è£…äº†Pageã€Componentç­‰å‡½æ•°è°ƒç”¨ï¼Œé™æ€è½¬è¯‘å°†ä¸€æ— æ˜¯å¤„ã€‚å› æ­¤è¿™ä¸€ç‰ˆå°ç¨‹åºå¯¹å¼€å‘è€…ä½¿ç”¨å­˜åœ¨å¾ˆå¤§çš„é™åˆ¶ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å°ç¨‹åºã€‚

#### serviceå±‚è¿‡é‡ï¼Œwebviewå±‚è¿‡è½»

æˆ‘ä»¬å°†æ•´ä¸ªreactåº”ç”¨å…¨éƒ¨æ”¾åœ¨äº†serviceçº¿ç¨‹ï¼Œå…¶ä¸­åŒ…å«ç»„ä»¶çš„å®ç°ï¼Œè¿™æ ·å¸¦æ¥äº†å¾ˆå¤šé—®é¢˜ã€‚

æˆ‘ä»¬æä¾›çš„ç»„ä»¶åŸæœ¬å°±æ˜¯å†…ç½®ç»„ä»¶è¿™äº›ç»„ä»¶æ˜¯å¯ä»¥ä¸è®¾ç½®DOMã€BOMçš„é™åˆ¶ï¼Œä½†æˆ‘ä»¬éƒ½ç»Ÿä¸€æ”¾åˆ°äº†serviceä¸­ï¼Œè‡ªå·±ç»™è‡ªå·±è®¾äº†ä¸€é“åã€‚ä¸ºäº†è§£å†³ç»„ä»¶çš„åŸç”Ÿèƒ½åŠ›ï¼Œserviceä¸­å†…ç½®ç»„ä»¶ä¸å»å®ç°å…·ä½“çš„åŠŸèƒ½ï¼Œåªè´Ÿè´£æ•°æ®çš„æ¥æ”¶ä¼ é€’ï¼Œç„¶ååœ¨webviewå±‚å†å®ç°ä¸€ä¸ªå…·ä½“åŠŸèƒ½çš„ç»„ä»¶ã€‚


### ç»§ç»­æ¢ç´¢

ç»è¿‡ä¸Šä¸€é˜¶æ®µçš„è¸©å‘ï¼ŒåŸºäºå°ç¨‹åºDSLåšé™æ€è½¬è¯‘è¿™æ¡è·¯è‚¯å®šé”™è¯¯çš„ã€‚å› æ­¤æƒ³åšå°ç¨‹åºå°±å¾—ä¸ä¸šç•Œå¯¹é½ï¼ŒçŸ¥é“ä¸šç•Œæ˜¯æ€ä¹ˆå®ç°çš„ã€‚

> æ³¨æ˜ï¼šä»¥ä¸‹æ¢ç´¢å‡ä¸ºé€šè¿‡æ­£å½“é€”å¾„è·å–ï¼Œå³å„å®¶çš„å°ç¨‹åºIDEä¸­å†…ç½®åŸºç¡€åº“ã€‚

#### æ­ç§˜æ”¯ä»˜å®å°ç¨‹åº

æ•´ä½“æ¶æ„ï¼š

webviewï¼šæ¸²æŸ“åŸºäºReactã€React-DOMï¼›å†…ç½®ç»„ä»¶æ˜¯Reactå®ç°ç»„ä»¶åŠ éƒ¨åˆ†Nativeç»„ä»¶ç»„åˆã€‚

ä¸šåŠ¡æ–¹ä»£ç çš„æ¨¡ç‰ˆæ–‡ä»¶ä¸æ ·å¼æ–‡ä»¶ä¼šæ‰“åŒ…åˆ°webviewï¼Œä¾‹å¦‚é¡µé¢Aå…¥å£ï¼š

```js

Page({
  usingComponents: {
    'com-a': 'xxxx/components/a'
  },
  get render() {
    return require('xxxx/pages/a/a.axml')
  },
  get style() {
    return require('xxxx/pages/a/a.acss')
  }
})

```

webviewåŸºç¡€åº“ä¸­æä¾›Pageçš„å®ç°ã€‚

serviceï¼šå…¨å±€å¯¹å¤–å‡½æ•°ï¼Œmy birdgeï¼Œappå®ä¾‹ã€pageå®ä¾‹ä»¥åŠè·¯ç”±å †æ ˆç®¡ç†ï¼Œå…¨å±€äº‹ä»¶ç›‘å¬


#### æ­ç§˜å­—èŠ‚å°ç¨‹åº

webview: åŸºäºè‡ªç ”ç±»reactæ¡†æ¶Yawæ¸²æŸ“ï¼›å†…ç½®ç»„ä»¶åŸºäºPolymerå®ç°çš„web-componentï¼Œä¸åŸºç¡€åº“è§£è€¦ã€‚